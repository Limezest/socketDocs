function handler(t){socket.emit("cell:changeEmit",t)}function align(t){$("#tbody>tr>td").toggleClass("text-center",!1),$("#tbody>tr>td").toggleClass("text-"+alignment,!1),socket.emit("cell:alignmentEmit",{past:alignment,next:t}),alignment=t,$("#tbody>tr>td").addClass("text-"+alignment)}function font(t){var n,e=parseInt($("#tbody>tr>td").css("font-size"));n="more"==t?1:-1,e=e+n+"px",$("#tbody>tr>td").css({"font-size":e}),socket.emit("cell:fontEmit",n)}function serverToLocal(t){for(var n=0;n<t.length;n++){var e=t[n];$("#"+e.id).text(e.value)}}var socket=io.connect(location.origin);$("[contenteditable]").on("focus",function(){var t=$(this);return t.data("before",t.html()),t}).on("blur keyup paste",function(){var t=$(this);return t.data("before")!==t.html()&&(t.data("before",t.html()),t.trigger("change")),t}),$("#tbody>tr>td").change(function(t){handler({id:t.currentTarget.id,value:t.currentTarget.innerText})}),socket.on("cell:changeBroadcast",function(t){$("#"+t.id).html(t.value)});var alignment="center";$("#left").click(function(){align("left")}),$("#center").click(function(){align("center")}),$("#right").click(function(){align("right")}),$("#justify").click(function(){align("justify")}),$("#font-less").click(function(){font("less")}),$("#font-more").click(function(){font("more")}),socket.on("cell:alignmentBroadcast",function(t){$("#tbody>tr>td").toggleClass("text-"+t.past,!1),$("#tbody>tr>td").addClass("text-"+t.next)}),socket.on("cell:fontBroadcast",function(t){var n=parseInt($("#tbody>tr>td").css("font-size"));n=n+t+"px",$("#tbody>tr>td").css({"font-size":n})}),socket.on("user:changeBroadcast",function(t){console.log(t),$("#user-list").empty();for(var n=0;n<t.length;n++){var e=t[n];$("#user-list").append('<li><img src="'+e.avatar+'" height="42" width="42"></img>&nbsp;'+e.name+"</li>")}}),socket.on("cell:loadEmit",function(t){serverToLocal(t)});
